{"version":3,"sources":["components/common/ErrorBoundary.js","store/history.js","store/app/actions.js","store/immerHandleActions.js","store/app/reducer.js","store/user/actions.js","store/user/reducer.js","store/editor/actions.js","store/canvas/actions.js","store/editor/reducer.js","store/canvas/reducer.js","store/rootReducer.js","store/user/saga.js","store/rootSaga.js","store/index.js","components/Login/index.js","components/common/SplashScreen.js","components/common/PrivateRoute.js","components/Editor/useImage.js","components/Editor/Canvas/Element.js","components/Editor/Canvas/index.js","components/Editor/Canvas/CropCanvas.js","components/Editor/Tools/index.js","components/Editor/Controls/index.js","store/editor/selectors.js","components/Editor/SVGColorsPicker/index.js","components/Editor/TextTools/index.js","components/Editor/ImageTools/index.js","components/Editor/index.js","App.js","store/app/selectors.js","i18n/IntlProvider.js","index.js"],"names":["ErrorBoundary","state","hasError","error","info","console","log","concat","this","children","props","react_default","a","createElement","React","Component","defaultProps","createHistory","window","browserHistory","createBrowserHistory","setLocale","createAction","locale","handleActions","actionsMap","defaultState","arguments","length","undefined","_ref","type","params","Object","objectWithoutProperties","produce","draft","resolvedType","toString","action","initialState","freeze","userReducer","defineProperty","actions","payload","loginSuccess","logoutSuccess","resetUserState","isLoggedIn","_handleActions","setActiveElementId","id","setEditingStatus","status","setPathColors","colors","modifyPathColor","i","color","startCrop","startSelection","endSelection","actionTypes","setBg","addElement","modifyElement","setBgImage","deleteElement","setFilter","changeGradientColorStops","setBG","elObject","newAttrs","imgURL","filter","colorStops","undo","redo","editorReducer","reducer_handleActions","activeElementId","_ref2","isEditing","canvasActions","_ref3","_ref4","_ref5","pathColors","isCropping","isSelectionActive","_ref6","_ref6$payload","canvasReducer","canvas_reducer_handleActions","background","imageURL","gradient","fillLinearGradientColorStops","elements","push","_ref4$payload","map","item","objectSpread","_ref7","fillLinearGradientStartPoint","x","y","fillLinearGradientEndPoint","text","align","fontStyle","fill","fontSize","rotation","fontFamily","history","rootReducer","combineReducers","app","user","editor","canvas","undoable","limit","undoType","redoType","includeAction","toConsumableArray","values","router","connectRouter","loginSaga","userSaga","regenerator_default","wrap","_context","prev","next","put","stop","_marked","_context2","takeLatest","_marked2","rootSaga","all","rootSaga_marked","persistConfig","key","storage","blacklist","configureStore","_ref$initialState","_ref$middleware","middleware","sagaMiddleware","createSagaMiddleware","onError","errorInfo","persistedReducer","persistReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","actionsBlacklist","actionSanitizer","compose","store","createStore","applyMiddleware","apply","persistor","persistStore","run","mapDispatchToProps","connect","login","pushRoute","_useState","useState","name","password","_useState2","slicedToArray","inputs","changeInput","onSubmit","e","preventDefault","value","onChange","target","react_router","to","component","location","rest","assign","render","pathname","from","image","useImage","url","crossOrigin","_useState2$","setState","useEffect","img","Image","src","onload","height","width","typesMap","Text","rect","Rect","svg","SingleElement","isSelected","onSelect","onTextDblClick","textEditVisible","elProps","currentShapeRef","useRef","transformerRef","lastPos","setLastPos","Shape","current","setNode","getLayer","batchDraw","_useImage","Fragment","draggable","onClick","ref","onDragEnd","_e$target$attrs","attrs","process","onTransformEnd","node","currentTarget","scaleX","scaleY","onDblClick","ReactKonva","canvasWidth","Number","canvasHeight","initProps","Canvas","canvasRef","selectedId","selectShape","activeElement","activeFilter","textAreaRef","layerRef","bgRef","bgImageRef","cache","draw","textAreaValue","setTextAreaValue","_useState3","_useState4","textAreaCoords","setTextAreaCoords","absPos","getAbsolutePosition","focus","filters","Konva","Filters","toUpperCase","slice","colorObj","style","position","onMouseDown","clickedOnEmpty","includes","getStage","noise","el","Element","StyledTextArea","scrollHeight","onKeyDown","keyCode","shiftKey","_getComputedStyle","getComputedStyle","parseInt","xCoord","yCoord","styled","textarea","_templateObject","initialSelectionRect","stroke","strokeWidth","dash","CropCanvas","secondCanvasRef","isImageSelected","setImageSelectedStatus","imageRef","initialSelectionRectCoords","setInitialSelectionRectCoords","_useState5","_useState6","selectionRect","changeSelectionRect","_useState7","_useState8","setSelectionStatus","onSelectionEnd","throttledOnChange","throttle","Math","abs","evt","offsetX","offsetY","onSelectionStart","onMouseUp","onMouseMove","onMouseLeave","originalHeight","originalWidth","Tools","addText","addRect","addSvg","addImage","isPickerVisible","setPickerVisibility","isGradientPickerVisible","setGradientPickerVisibility","activeGradientIndex","setActiveGradientIndex","fileInput","onGradientPickerClick","ToolsColumn","InvisibleInput","Reader","FileReader","readAsDataURL","files","onloadend","result","StyledSketchPicker","onChangeComplete","hex","GradientWrapper","data","defaultColor","oldStops","formRGBString","rgbObj","r","g","b","newColorStops","rgb","GradientPicker","clr","click","div","Tools_templateObject","SketchPicker","_templateObject2","input","_templateObject3","_templateObject4","_templateObject5","Controls","pastStatesExist","futureStatesExist","Container","StyledButton","disabled","Controls_templateObject","button","Controls_templateObject2","selectActiveElement","createSelector","present","find","SVGColorsPicker","setCurrentColor","index","setCurrentIndex","parseSVG","asyncToGenerator","mark","_callee","resp","parser","doc","serialized","blob","objUrl","fetch","sent","DOMParser","parseFromString","querySelectorAll","setAttribute","XMLSerializer","serializeToString","Blob","URL","createObjectURL","_x","_x2","SVGColorsPicker_Container","visible","SVGColorsPicker_StyledSketchPicker","col","ColoredDiv","onColorClick","SVGColorsPicker_templateObject","SVGColorsPicker_templateObject2","SVGColorsPicker_templateObject3","TextTools_templateObject","TextTools_templateObject2","ColorBtn","TextTools_templateObject3","setFontSize","TextTools_Container","TextTools_StyledSketchPicker","newValue","max","min","step","ImageTools_templateObject","ImageTools","onCropBtnClick","ImageTools_Container","Editor","activeElId","paths","getAttribute","Boolean","onKeyPress","document","addEventListener","removeEventListener","createTextEl","useCallback","String","random","floor","createRectangle","createSvg","_callee2","createImage","deleteEl","Editor_Container","EditorBox","Editor_SVGColorsPicker","Editor_TextTools","Editor_ImageTools","Editor_Controls","Editor_Tools","Canvas_CropCanvas","Editor_Canvas","marginBottom","zIndex","anchor","toDataURL","Editor_templateObject","Editor_templateObject2","past","future","Main","path","App","exact","SplashScreen","Login","common_PrivateRoute","getLocale","i18next","init","fallbackLng","fallbackNS","resources","de_DE","en_US","parseMissingKeyHandler","missing","languages","I18N","changeLanguage","prevProps","newLocale","dist_es","i18n","PureComponent","withRouter","pure","__PRELOADED_STATE__","routerMiddleware","es","integration_react","loading","esm","IntlProvider","common_ErrorBoundary","src_App","getElementById"],"mappings":"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","file":"static/js/main.1a958c7e.chunk.js","sourcesContent":["import React from 'react';\r\nimport propTypes from 'prop-types';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  static getDerivedStateFromError() {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  static propTypes = {\r\n    children: propTypes.any,\r\n  };\r\n\r\n  static defaultProps = {\r\n    children: null,\r\n  };\r\n\r\n  state = { hasError: false };\r\n\r\n  componentDidCatch(error, info) {\r\n    console.log(`Error caught in boundary: ${error} = ${info}`);\r\n  }\r\n\r\n  render() {\r\n    const { hasError } = this.state;\r\n    const { children } = this.props;\r\n    if (hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n\r\n    return children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport const createHistory = () => {\r\n  const history = window.browserHistory || createBrowserHistory();\r\n  if (process.env.NODE_ENV === 'development' && !window.browserHistory) {\r\n    window.browserHistory = history;\r\n  }\r\n  return history;\r\n};\r\nexport default createHistory;\r\n","/* eslint-disable import/prefer-default-export */\r\nimport { createAction } from 'redux-actions';\r\n\r\nexport const setLocale = createAction('APP/SET_LOCALE', (locale) => ({ locale }));\r\n","import { produce } from 'immer/dist/immer';\r\n\r\nconst handleActions = (actionsMap, defaultState) => (state = defaultState, { type, ...params }) =>\r\n  produce(state, (draft) => {\r\n    const resolvedType = typeof type === 'function' ? type.toString() : type;\r\n    const action = actionsMap[resolvedType];\r\n    // return action && action.call(null, draft, params);\r\n    return action && action(draft, params);\r\n  });\r\n\r\nexport default handleActions;\r\n","/* eslint-disable no-param-reassign,no-unused-vars */\r\nimport * as actions from './actions';\r\nimport handleActions from '../immerHandleActions';\r\n\r\nconst initialState = Object.freeze({\r\n  locale: 'en_US',\r\n});\r\n\r\nconst userReducer = handleActions(\r\n  {\r\n    [actions.setLocale]: (draft, { payload: { locale } }) => {\r\n      draft.locale = locale;\r\n    },\r\n  },\r\n  initialState\r\n);\r\n\r\nexport default userReducer;\r\n","import { createAction } from 'redux-actions';\r\n\r\nexport const loginSuccess = createAction('LOGIN_SUCCESS');\r\nexport const logoutSuccess = createAction('LOGOUT_SUCCESS');\r\nexport const resetUserState = createAction('RESET_USER_STATE');\r\n","/* eslint-disable no-param-reassign,no-unused-vars */\r\nimport * as actions from './actions';\r\nimport handleActions from '../immerHandleActions';\r\n\r\nconst initialState = Object.freeze({\r\n  isLoggedIn: true,\r\n});\r\n\r\nconst userReducer = handleActions(\r\n  {\r\n    [actions.loginSuccess]: (draft) => {\r\n      draft.isLoggedIn = true;\r\n    },\r\n    [actions.logoutSuccess]: (draft) => {\r\n      draft.isLoggedIn = false;\r\n    },\r\n    [actions.resetUserState]: (draft) => {\r\n      draft = initialState;\r\n    },\r\n  },\r\n  initialState\r\n);\r\n\r\nexport default userReducer;\r\n","/* eslint-disable import/prefer-default-export */\r\nimport { createAction } from 'redux-actions';\r\n\r\nexport const setActiveElementId = createAction('EDITOR/SET_ACTIVE_ELEMENT_ID', (id) => ({ id }));\r\nexport const setEditingStatus = createAction('EDITOR/SET_EDITING_STATUS', (status) => ({ status }));\r\n\r\nexport const setPathColors = createAction('EDITOR/SET_PATH_COLORS', (colors) => ({ colors }));\r\nexport const modifyPathColor = createAction('EDITOR/MODIFY_PATH_COLOR', (i, color) => ({ i, color }));\r\nexport const startCrop = createAction('EDITOR/START_CROP');\r\nexport const startSelection = createAction('EDITOR/START_SELECTION');\r\nexport const endSelection = createAction('EDITOR/END_SELECTION');\r\n","/* eslint-disable import/prefer-default-export */\r\nimport { createAction } from 'redux-actions';\r\n\r\nexport const actionTypes = {\r\n  setBg: 'EDITOR/SET_BG',\r\n  addElement: 'EDITOR/ADD_ELEMENT',\r\n  modifyElement: 'EDITOR/MODIFY_ELEMENT',\r\n  setBgImage: 'EDITOR/SET_BG_IMAGE',\r\n  deleteElement: 'EDITOR/DELETE_ELEMENT',\r\n  setFilter: 'EDITOR/SET_FILTER',\r\n  changeGradientColorStops: 'EDITOR/CHANGE_BACKGROUND_GRADIENT',\r\n};\r\n\r\nexport const setBG = createAction(actionTypes.setBg, (color) => ({ color }));\r\nexport const addElement = createAction(actionTypes.addElement, (elObject) => ({ elObject }));\r\nexport const modifyElement = createAction(actionTypes.modifyElement, (id, newAttrs) => ({ id, newAttrs }));\r\nexport const setBgImage = createAction(actionTypes.setBgImage, (imgURL) => ({ imgURL }));\r\nexport const deleteElement = createAction(actionTypes.deleteElement, (id) => ({ id }));\r\nexport const setFilter = createAction(actionTypes.setFilter, (filter) => ({ filter }));\r\nexport const changeGradientColorStops = createAction(actionTypes.changeGradientColorStops, (colorStops) => ({\r\n  colorStops,\r\n}));\r\n\r\nexport const undo = createAction('CANVAS_UNDO');\r\nexport const redo = createAction('CANVAS_REDO');\r\n","/* eslint-disable no-param-reassign,no-unused-vars */\r\nimport * as actions from './actions';\r\nimport handleActions from '../immerHandleActions';\r\nimport * as canvasActions from '../canvas/actions';\r\n\r\nconst initialState = {\r\n  activeElementId: null,\r\n  isEditing: false,\r\n  isCropping: false,\r\n  isSelectionActive: false,\r\n  pathColors: [],\r\n};\r\n\r\nconst editorReducer = handleActions(\r\n  {\r\n    [actions.setActiveElementId]: (draft, { payload: { id } }) => {\r\n      draft.activeElementId = id;\r\n    },\r\n    [actions.setEditingStatus]: (draft, { payload: { status } }) => {\r\n      draft.isEditing = status;\r\n    },\r\n    [canvasActions.deleteElement]: (draft, { payload: { id } }) => {\r\n      draft.activeElementId = null;\r\n      draft.isEditing = false;\r\n    },\r\n    [canvasActions.addElement]: (draft, { payload: { id } }) => {\r\n      draft.activeElementId = null;\r\n      draft.isEditing = false;\r\n    },\r\n    [actions.setPathColors]: (draft, { payload: { colors } }) => {\r\n      draft.pathColors = colors;\r\n    },\r\n    [actions.startCrop]: (draft) => {\r\n      draft.isCropping = true;\r\n    },\r\n    [actions.startSelection]: (draft) => {\r\n      draft.isSelectionActive = true;\r\n    },\r\n    [actions.endSelection]: (draft) => {\r\n      draft.isSelectionActive = false;\r\n    },\r\n    [actions.modifyPathColor]: (draft, { payload: { i, color } }) => {\r\n      draft.pathColors[i] = color;\r\n    },\r\n  },\r\n  initialState\r\n);\r\n\r\nexport default editorReducer;\r\n","/* eslint-disable no-param-reassign,no-unused-vars */\r\nimport * as actions from './actions';\r\nimport handleActions from '../immerHandleActions';\r\n\r\nconst initialState = {\r\n  background: {\r\n    type: 'color',\r\n    color: '#FF2E2E',\r\n    imageURL: null,\r\n    gradient: {\r\n      fillLinearGradientStartPoint: { x: 0, y: 0 },\r\n      fillLinearGradientEndPoint: { x: 600, y: 600 },\r\n      fillLinearGradientColorStops: [0, '#FF2E2E', 1, '#FF2E2E'],\r\n    },\r\n  },\r\n  filter: '',\r\n  elements: [\r\n    {\r\n      id: 'sdasd',\r\n      type: 'text',\r\n      text: 'Test text',\r\n      x: 0,\r\n      y: 0,\r\n      align: 'left',\r\n      fontStyle: 'normal',\r\n      // width: 125,\r\n      // height: 30,\r\n      fill: '#fff',\r\n      fontSize: 30,\r\n      rotation: 45,\r\n      fontFamily: 'Arial',\r\n    },\r\n  ],\r\n};\r\n\r\nconst canvasReducer = handleActions(\r\n  {\r\n    [actions.setBG]: (draft, { payload: { color } }) => {\r\n      draft.background.color = color;\r\n      draft.background.type = 'color';\r\n      draft.background.imageURL = null;\r\n      draft.background.gradient.fillLinearGradientColorStops = [0, color, 1, color];\r\n      draft.filter = '';\r\n    },\r\n    [actions.changeGradientColorStops]: (draft, { payload: { colorStops } }) => {\r\n      draft.background.type = 'gradient';\r\n      draft.background.imageURL = null;\r\n      draft.background.gradient.fillLinearGradientColorStops = colorStops;\r\n      draft.filter = '';\r\n    },\r\n    [actions.addElement]: (draft, { payload: { elObject } }) => {\r\n      draft.elements.push(elObject);\r\n    },\r\n    [actions.modifyElement]: (draft, { payload: { id, newAttrs } }) => {\r\n      draft.elements = draft.elements.map((item) => (item.id === id ? { ...item, ...newAttrs } : item));\r\n    },\r\n    [actions.setBgImage]: (draft, { payload: { imgURL } }) => {\r\n      draft.background.imageURL = imgURL;\r\n      draft.background.type = 'imageURL';\r\n      draft.filter = '';\r\n    },\r\n    [actions.deleteElement]: (draft, { payload: { id } }) => {\r\n      draft.elements = draft.elements.filter((item) => item.id !== id);\r\n    },\r\n    [actions.setFilter]: (draft, { payload: { filter } }) => {\r\n      draft.filter = filter;\r\n    },\r\n  },\r\n  initialState\r\n);\r\n\r\nexport default canvasReducer;\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router';\r\nimport undoable, { includeAction } from 'redux-undo';\r\nimport createHistory from './history';\r\nimport app from './app/reducer';\r\nimport user from './user/reducer';\r\nimport editor from './editor/reducer';\r\nimport canvas from './canvas/reducer';\r\n\r\nimport { actionTypes } from './canvas/actions';\r\n\r\nconst history = createHistory();\r\nconst rootReducer = combineReducers({\r\n  app,\r\n  user,\r\n  editor,\r\n  canvas: undoable(canvas, {\r\n    limit: 20,\r\n    undoType: 'CANVAS_UNDO',\r\n    redoType: 'CANVAS_REDO',\r\n    filter: includeAction([...Object.values(actionTypes)]),\r\n  }),\r\n  router: connectRouter(history),\r\n});\r\n\r\nexport default rootReducer;\r\n","import { takeLatest, put } from 'redux-saga/effects';\r\nimport * as actions from './actions';\r\n\r\nfunction* loginSaga() {\r\n  yield put({ type: 'AZZAZAZ' });\r\n}\r\n\r\nexport default function* userSaga() {\r\n  yield takeLatest(actions.loginSuccess, loginSaga);\r\n}\r\n","import { all } from 'redux-saga/effects';\r\nimport userSaga from './user/saga';\r\n\r\nfunction* rootSaga() {\r\n  yield all([userSaga()]);\r\n}\r\n\r\nexport default rootSaga;\r\n","/* eslint-disable global-require */\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport { persistStore, persistReducer } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nimport rootReducer from './rootReducer';\r\nimport rootSaga from './rootSaga';\r\n\r\nconst persistConfig = {\r\n  key: 'root',\r\n  storage,\r\n  blacklist: ['editor', 'canvas'],\r\n};\r\n\r\nexport const configureStore = ({ initialState = {}, middleware = [] } = {}) => {\r\n  const sagaMiddleware = createSagaMiddleware({\r\n    onError: (error, errorInfo) => {\r\n      console.log('---------ERROR IN REDUX SAGA-----------');\r\n      console.log(error);\r\n      console.log(errorInfo);\r\n    },\r\n  });\r\n  const persistedReducer = persistReducer(persistConfig, rootReducer);\r\n  const devtools =\r\n    typeof window !== 'undefined' &&\r\n    typeof window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ === 'function' &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n      actionsBlacklist: [],\r\n      actionSanitizer: (action) => ({\r\n        ...action,\r\n        type: action.type.toString(),\r\n      }),\r\n    });\r\n\r\n  const composeEnhancers = devtools || compose;\r\n  const store = createStore(\r\n    persistedReducer,\r\n    initialState,\r\n    composeEnhancers(applyMiddleware(...[sagaMiddleware, ...middleware]))\r\n  );\r\n  const persistor = persistStore(store);\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (module.hot) {\r\n      module.hot.accept('./rootReducer', () => store.replaceReducer(require('./rootReducer').default));\r\n    }\r\n  }\r\n  sagaMiddleware.run(rootSaga);\r\n  return { store, persistor };\r\n};\r\n\r\nexport default configureStore;\r\n","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport propTypes from 'prop-types';\r\n\r\nimport { push } from 'connected-react-router';\r\n\r\nimport { loginSuccess } from '../../store/user/actions';\r\n\r\nconst Login = ({ loginSuccess: login, push: pushRoute }) => {\r\n  const [inputs, changeInput] = useState({ name: '', password: '' });\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (inputs.name === '123' && inputs.password === '123') {\r\n      login();\r\n      pushRoute('/');\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <span>Username:</span>\r\n        <input type=\"text\" value={inputs.name} onChange={(e) => changeInput({ ...inputs, name: e.target.value })} />\r\n        <span>Password:</span>\r\n        <input\r\n          type=\"text\"\r\n          value={inputs.password}\r\n          onChange={(e) => changeInput({ ...inputs, password: e.target.value })}\r\n        />\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  loginSuccess: propTypes.func.isRequired,\r\n  push: propTypes.func.isRequired,\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  loginSuccess,\r\n  push,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(Login);\r\n","import React from 'react';\r\nimport propTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router';\r\n\r\nconst SplashScreen = ({ isLoggedIn }) => (isLoggedIn ? <Redirect to=\"/editor\" /> : <Redirect to=\"/login\" />);\r\n\r\nSplashScreen.propTypes = {\r\n  isLoggedIn: propTypes.bool.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isLoggedIn: state.user.isLoggedIn,\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(SplashScreen);\r\n","import React from 'react';\r\nimport propTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst PrivateRoute = ({ component: Component, isLoggedIn, location, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      isLoggedIn ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: '/login',\r\n            state: { from: location },\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nPrivateRoute.propTypes = {\r\n  component: propTypes.oneOfType([propTypes.func, propTypes.object]).isRequired,\r\n  isLoggedIn: propTypes.bool.isRequired,\r\n  location: propTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isLoggedIn: state.user.isLoggedIn,\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(PrivateRoute);\r\n","import { useState, useEffect } from 'react';\r\n\r\nconst defaultState = { image: undefined, status: 'loading' };\r\n\r\nexport default function useImage(url, crossOrigin) {\r\n  const [{ image, status }, setState] = useState(defaultState);\r\n  useEffect(() => {\r\n    if (!url) return;\r\n    const img = new window.Image();\r\n    img.src = url;\r\n    img.onload = () => {\r\n      console.log('img.heihght', img.height);\r\n      console.log('img.width', img.width);\r\n      setState({ image: img, status: 'loaded' });\r\n    };\r\n    if (crossOrigin) img.crossOrigin = crossOrigin;\r\n\r\n    return () => setState(defaultState);\r\n  }, [url, crossOrigin]);\r\n\r\n  return [image, status];\r\n}\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { func, bool, string } from 'prop-types';\r\nimport { Text, Rect, Transformer, Image } from 'react-konva';\r\nimport useImage from '../useImage';\r\n\r\nconst canvasWidth = process.env.REACT_APP_CANVAS_WIDTH;\r\nconst canvasHeight = process.env.REACT_APP_CANVAS_HEIGHT;\r\n\r\nconst typesMap = {\r\n  text: Text,\r\n  rect: Rect,\r\n  svg: Image,\r\n  image: Image,\r\n};\r\n\r\nconst SingleElement = ({\r\n  type,\r\n  id,\r\n  isSelected,\r\n  onSelect,\r\n  modifyElement,\r\n  onTextDblClick,\r\n  textEditVisible,\r\n  ...elProps\r\n}) => {\r\n  const currentShapeRef = useRef(null);\r\n  const transformerRef = useRef(null);\r\n  const [lastPos, setLastPos] = useState({ x: elProps.x, y: elProps.y });\r\n  const Shape = typesMap[type];\r\n  const onDragEnd = (e) => {\r\n    const { x, y } = e.target.attrs;\r\n    if (x > canvasWidth || x < 0 || y > canvasHeight || y < 0) {\r\n      e.target.to({ x: lastPos.x, y: lastPos.y });\r\n      modifyElement(id, { x: lastPos.x, y: lastPos.y });\r\n    } else {\r\n      modifyElement(id, {\r\n        x: e.target.x(),\r\n        y: e.target.y(),\r\n      });\r\n      setLastPos({ x: e.target.x(), y: e.target.y() });\r\n    }\r\n  };\r\n  const onTransformEnd = (e) => {\r\n    // transformer is changing scale\r\n    const node = e.currentTarget;\r\n    const scaleX = node.scaleX();\r\n    const scaleY = node.scaleY();\r\n    // we will reset it back\r\n    node.scaleX(1);\r\n    node.scaleY(1);\r\n    modifyElement(id, {\r\n      x: node.x(),\r\n      y: node.y(),\r\n      rotation: node.attrs.rotation,\r\n      width: node.width() * scaleX,\r\n      height: node.height() * scaleY,\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    if (isSelected) {\r\n      // we need to attach transformer manually\r\n      if (transformerRef.current) {\r\n        transformerRef.current.setNode(currentShapeRef.current);\r\n        transformerRef.current.getLayer().batchDraw();\r\n      }\r\n    }\r\n  }, [isSelected, textEditVisible]);\r\n  const [image] = useImage(elProps.url);\r\n  return (\r\n    <>\r\n      {textEditVisible && isSelected && type === 'text' ? null : (\r\n        <Shape\r\n          draggable\r\n          onClick={() => !isSelected && onSelect(id)}\r\n          ref={currentShapeRef}\r\n          onDragEnd={onDragEnd}\r\n          onTransformEnd={onTransformEnd}\r\n          key={id}\r\n          onDblClick={type === 'text' ? onTextDblClick : undefined}\r\n          image={image}\r\n          {...elProps}\r\n        />\r\n      )}\r\n\r\n      {isSelected && !textEditVisible && <Transformer ref={transformerRef} />}\r\n    </>\r\n  );\r\n};\r\n\r\nSingleElement.propTypes = {\r\n  type: string.isRequired,\r\n  id: string.isRequired,\r\n  isSelected: bool.isRequired,\r\n  onSelect: func.isRequired,\r\n  modifyElement: func.isRequired,\r\n  onTextDblClick: func.isRequired,\r\n  textEditVisible: bool,\r\n};\r\nSingleElement.defaultProps = {\r\n  textEditVisible: false,\r\n};\r\n\r\nexport default SingleElement;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { func, bool, object, string, array } from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport Konva from 'konva';\r\nimport { Layer, Stage, Rect, Image } from 'react-konva';\r\nimport useImage from '../useImage';\r\n\r\nimport SingleElement from './Element';\r\n\r\nconst canvasWidth = Number(process.env.REACT_APP_CANVAS_WIDTH);\r\nconst canvasHeight = Number(process.env.REACT_APP_CANVAS_HEIGHT);\r\nconst initProps = {\r\n  x: 0,\r\n  y: 0,\r\n  width: canvasWidth,\r\n  height: canvasHeight,\r\n};\r\n\r\nconst Canvas = ({\r\n  canvasRef,\r\n  elements,\r\n  selectedId,\r\n  selectShape,\r\n  modifyElement,\r\n  activeElement,\r\n  setEditingStatus,\r\n  isEditing,\r\n  activeFilter,\r\n  background,\r\n}) => {\r\n  const textAreaRef = useRef(null);\r\n  const layerRef = useRef(null);\r\n  const bgRef = useRef(null);\r\n  const bgImageRef = useRef(null);\r\n  useEffect(() => {\r\n    if (bgRef.current) bgRef.current.cache();\r\n  }, [background.color, background.gradient]);\r\n  const [image] = useImage(background.imageURL, 'Anonymous');\r\n  useEffect(() => {\r\n    if (bgImageRef.current) {\r\n      bgImageRef.current.cache();\r\n      bgImageRef.current.getLayer().draw();\r\n    }\r\n  }, [image]);\r\n  const [textAreaValue, setTextAreaValue] = useState(activeElement ? activeElement.text : '');\r\n  const [textAreaCoords, setTextAreaCoords] = useState({ x: 0, y: 0 });\r\n  const onTextDblClick = (e) => {\r\n    const absPos = e.target.getAbsolutePosition();\r\n    setTextAreaCoords({ x: absPos.x, y: absPos.y });\r\n    setTextAreaValue(activeElement.text);\r\n    setEditingStatus(true);\r\n    textAreaRef.current.focus();\r\n  };\r\n  const handleTextEdit = (e) => {\r\n    textAreaRef.current.style.height = 'auto';\r\n    textAreaRef.current.style.height = `${textAreaRef.current.scrollHeight}px`;\r\n    setTextAreaValue(e.target.value);\r\n  };\r\n  const onTextareaKeyDown = (e) => {\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      const { width, height } = getComputedStyle(textAreaRef.current);\r\n      setEditingStatus(false);\r\n      modifyElement(activeElement.id, {\r\n        text: textAreaValue,\r\n        width: parseInt(width, 10),\r\n        height: parseInt(height, 10),\r\n      });\r\n    }\r\n  };\r\n  const filters = activeFilter ? [Konva.Filters[`${activeFilter[0].toUpperCase()}${activeFilter.slice(1)}`]] : '';\r\n  const colorObj = background.type === 'color' ? { fill: background.color } : background.gradient;\r\n  return (\r\n    <div style={{ position: 'relative' }}>\r\n      <Stage\r\n        ref={canvasRef}\r\n        width={canvasWidth}\r\n        height={canvasHeight}\r\n        onMouseDown={(e) => {\r\n          // deselect when clicked on empty area\r\n          const clickedOnEmpty =\r\n            (e.target.attrs.id && e.target.attrs.id.includes('bg')) || e.target === e.target.getStage();\r\n          if (clickedOnEmpty && selectedId) {\r\n            selectShape(null);\r\n          }\r\n          if (clickedOnEmpty && isEditing) {\r\n            setEditingStatus(false);\r\n          }\r\n        }}\r\n      >\r\n        <Layer ref={layerRef}>\r\n          {background.imageURL ? (\r\n            <Image {...initProps} id=\"bgImage\" ref={bgImageRef} image={image} filters={filters} noise={3} />\r\n          ) : (\r\n            <Rect {...initProps} id=\"bg\" ref={bgRef} filters={filters} noise={3} {...colorObj} />\r\n          )}\r\n          {elements.map((el) => {\r\n            return (\r\n              <SingleElement\r\n                key={el.id}\r\n                {...el}\r\n                onSelect={selectShape}\r\n                isSelected={el.id === selectedId}\r\n                modifyElement={modifyElement}\r\n                onTextDblClick={onTextDblClick}\r\n                textEditVisible={isEditing}\r\n              />\r\n            );\r\n          })}\r\n        </Layer>\r\n      </Stage>\r\n      <StyledTextArea\r\n        ref={textAreaRef}\r\n        value={textAreaValue}\r\n        onChange={handleTextEdit}\r\n        onKeyDown={onTextareaKeyDown}\r\n        xCoord={textAreaCoords.x}\r\n        yCoord={textAreaCoords.y}\r\n        textEditVisible={isEditing}\r\n        el={activeElement && activeElement.type === 'text' && activeElement}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nCanvas.propTypes = {\r\n  canvasRef: object.isRequired,\r\n  background: object.isRequired,\r\n  elements: array.isRequired,\r\n  selectedId: string,\r\n  selectShape: func.isRequired,\r\n  modifyElement: func.isRequired,\r\n  setEditingStatus: func.isRequired,\r\n  activeElement: object,\r\n  activeFilter: string,\r\n  isEditing: bool.isRequired,\r\n};\r\nCanvas.defaultProps = {\r\n  selectedId: null,\r\n  activeElement: null,\r\n  activeFilter: '',\r\n};\r\n\r\nconst StyledTextArea = styled.textarea`\r\n  display: ${(props) => (props.textEditVisible ? 'block' : 'none')};\r\n  position: absolute;\r\n  top: ${(props) => `${props.yCoord}px`};\r\n  left: ${(props) => `${props.xCoord}px`};\r\n  transform-origin: left top;\r\n  background: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  resize: none;\r\n  border: 1px solid white;\r\n  outline: none;\r\n  text-align: ${(props) => props.el && props.el.align};\r\n  font-style: ${(props) => props.el && props.el.fontStyle};\r\n  overflow: hidden;\r\n  line-height: 1;\r\n  font-size: ${(props) => `${props.el && props.el.fontSize}px`};\r\n  height: auto;\r\n  width: ${(props) => `${props.el && props.el.width}px`};\r\n  color: ${(props) => props.el && props.el.fill};\r\n  font-family: ${(props) => `${props.el && props.el.fontFamily}`};\r\n  transform: ${(props) => `rotateZ(${props.el && props.el.rotation}deg)`};\r\n`;\r\n\r\nexport default Canvas;\r\n","import React, { useRef, useState, useEffect } from 'react';\r\nimport { object } from 'prop-types';\r\nimport { Layer, Stage, Rect, Image, Transformer } from 'react-konva';\r\nimport { throttle } from 'lodash';\r\n\r\n// TODO big chunk of this code is being repeated over and over across multiple components, find a way to optimize\r\n\r\nimport useImage from '../useImage';\r\n\r\nconst canvasWidth = process.env.REACT_APP_CANVAS_WIDTH;\r\nconst canvasHeight = process.env.REACT_APP_CANVAS_HEIGHT;\r\n\r\nconst initialSelectionRect = {\r\n  x: 0,\r\n  y: 0,\r\n  width: 0,\r\n  height: 0,\r\n  stroke: '#2532de',\r\n  strokeWidth: 1,\r\n  dash: [5, 10],\r\n};\r\n\r\nconst CropCanvas = ({ activeElement, secondCanvasRef }) => {\r\n  const [image] = useImage(activeElement.url);\r\n  const [isImageSelected, setImageSelectedStatus] = useState(false);\r\n  const transformerRef = useRef(null);\r\n  const imageRef = useRef(null);\r\n  const [initialSelectionRectCoords, setInitialSelectionRectCoords] = useState({ x: 0, y: 0 });\r\n  const [selectionRect, changeSelectionRect] = useState(initialSelectionRect);\r\n  const [isSelectionActive, setSelectionStatus] = useState(false);\r\n  useEffect(() => {\r\n    if (isImageSelected) {\r\n      // we need to attach transformer manually\r\n      if (transformerRef.current) {\r\n        transformerRef.current.setNode(imageRef.current);\r\n        transformerRef.current.getLayer().batchDraw();\r\n      }\r\n    }\r\n  }, [isImageSelected]);\r\n  const onImageClick = () => setImageSelectedStatus(true);\r\n  const onSelectionStart = (e) => {\r\n    const clickedOnImage =\r\n      (e.target.attrs.id && e.target.attrs.id.includes('image')) ||\r\n      (e.target.attrs.name && e.target.attrs.name.includes('anchor'));\r\n    if (clickedOnImage) return;\r\n    setSelectionStatus(true);\r\n    setInitialSelectionRectCoords({ x: e.evt.offsetX, y: e.evt.offsetY });\r\n  };\r\n  const onSelectionEnd = () => {\r\n    setSelectionStatus(false);\r\n    setInitialSelectionRectCoords({ x: 0, y: 0 });\r\n    changeSelectionRect(initialSelectionRect);\r\n  };\r\n  const onSelectionChange = (e) => {\r\n    if (isSelectionActive) {\r\n      const width = Math.abs(e.evt.offsetX - initialSelectionRectCoords.x);\r\n      const height = Math.abs(e.evt.offsetY - initialSelectionRectCoords.y);\r\n      if (width > canvasWidth || height > canvasHeight) {\r\n        onSelectionEnd();\r\n      }\r\n      const xCoord = e.evt.offsetX - initialSelectionRectCoords.x > 0 ? initialSelectionRectCoords.x : e.evt.offsetX;\r\n      const yCoord = e.evt.offsetY - initialSelectionRectCoords.y > 0 ? initialSelectionRectCoords.y : e.evt.offsetY;\r\n      changeSelectionRect({ ...selectionRect, x: xCoord, y: yCoord, width, height });\r\n    }\r\n  };\r\n  const throttledOnChange = throttle(onSelectionChange, 500);\r\n  return (\r\n    <>\r\n      <Stage height={canvasHeight} width={canvasWidth} ref={secondCanvasRef}>\r\n        <Layer\r\n          onMouseDown={(e) => {\r\n            // deselect when clicked on empty area\r\n            onSelectionStart(e);\r\n            const clickedOnEmpty =\r\n              (e.target.attrs.id && e.target.attrs.id.includes('bg')) || e.target === e.target.getStage();\r\n            if (clickedOnEmpty && isImageSelected) {\r\n              setImageSelectedStatus(false);\r\n            }\r\n          }}\r\n          onMouseUp={onSelectionEnd}\r\n          onMouseMove={throttledOnChange}\r\n          onMouseLeave={onSelectionEnd}\r\n        >\r\n          <Rect id=\"bg\" x={0} y={0} height={canvasHeight} width={canvasWidth} fill=\"lightgrey\" />\r\n          <Image\r\n            draggable\r\n            id=\"image\"\r\n            onClick={onImageClick}\r\n            ref={imageRef}\r\n            image={image}\r\n            x={0}\r\n            y={0}\r\n            height={activeElement.originalHeight}\r\n            width={activeElement.originalWidth}\r\n          />\r\n          {isImageSelected && <Transformer ref={transformerRef} />}\r\n          {isSelectionActive && <Rect {...selectionRect} />}\r\n        </Layer>\r\n      </Stage>\r\n    </>\r\n  );\r\n};\r\n\r\nCropCanvas.propTypes = {\r\n  activeElement: object,\r\n  secondCanvasRef: object.isRequired,\r\n};\r\n\r\nCropCanvas.defaultProps = {\r\n  activeElement: null,\r\n};\r\n\r\nexport default CropCanvas;\r\n","import React, { useState, useRef } from 'react';\r\nimport { func, string, object } from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport { SketchPicker } from 'react-color';\r\n\r\nconst Tools = ({\r\n  setBg,\r\n  background,\r\n  addText,\r\n  addRect,\r\n  addSvg,\r\n  setBgImage,\r\n  setFilter,\r\n  activeFilter,\r\n  changeGradientColorStops,\r\n  addImage,\r\n}) => {\r\n  const [isPickerVisible, setPickerVisibility] = useState(false);\r\n  const [isGradientPickerVisible, setGradientPickerVisibility] = useState(false);\r\n  const [activeGradientIndex, setActiveGradientIndex] = useState(1);\r\n  const fileInput = useRef(null);\r\n  const onPick = (colorObj) => {\r\n    setBg(colorObj.hex);\r\n    setPickerVisibility(false);\r\n  };\r\n  const download = () => {\r\n    fileInput.current.click();\r\n  };\r\n  const onInputChange = (e) => {\r\n    const Reader = new FileReader();\r\n    Reader.readAsDataURL(e.target.files[0]);\r\n    Reader.onloadend = function() {\r\n      setBgImage(Reader.result);\r\n      fileInput.current.value = '';\r\n    };\r\n  };\r\n  const onGradientPickerClick = (i) => {\r\n    setActiveGradientIndex(i);\r\n    setGradientPickerVisibility(true);\r\n  };\r\n  const onGradientColorPickComplete = (data) => {\r\n    const defaultColor = background.color;\r\n    const oldStops = background.gradient.fillLinearGradientColorStops;\r\n    const formRGBString = (rgbObj) => `rgba(${rgbObj.r},${rgbObj.g},${rgbObj.b},${rgbObj.a})`;\r\n    const newColorStops =\r\n      activeGradientIndex === 1\r\n        ? [0, formRGBString(data.rgb), 1, oldStops[3] || defaultColor]\r\n        : [0, oldStops[1] || defaultColor, 1, formRGBString(data.rgb)];\r\n    changeGradientColorStops(newColorStops);\r\n    setGradientPickerVisibility(false);\r\n  };\r\n  return (\r\n    <ToolsColumn>\r\n      <InvisibleInput type=\"file\" ref={fileInput} onChange={onInputChange} />\r\n      {isPickerVisible && <StyledSketchPicker color={background.color} onChangeComplete={onPick} />}\r\n      <button type=\"button\" onClick={() => setPickerVisibility(!isPickerVisible)}>\r\n        Background color\r\n      </button>\r\n      <GradientWrapper>\r\n        {isGradientPickerVisible && (\r\n          <StyledSketchPicker\r\n            color={background.gradient.fillLinearGradientColorStops[activeGradientIndex]}\r\n            onChangeComplete={onGradientColorPickComplete}\r\n          />\r\n        )}\r\n        <GradientPicker\r\n          clr={background.gradient.fillLinearGradientColorStops[1]}\r\n          onClick={() => onGradientPickerClick(1)}\r\n        />\r\n        <GradientPicker\r\n          clr={background.gradient.fillLinearGradientColorStops[3]}\r\n          onClick={() => onGradientPickerClick(3)}\r\n        />\r\n      </GradientWrapper>\r\n      <button type=\"button\" onClick={addText}>\r\n        Text\r\n      </button>\r\n      <button type=\"button\" onClick={addRect}>\r\n        Add rectangle\r\n      </button>\r\n      <button type=\"button\" onClick={download}>\r\n        Download image\r\n      </button>\r\n      <button type=\"button\" onClick={addSvg}>\r\n        Add svg\r\n      </button>\r\n      <button type=\"button\" onClick={addImage}>\r\n        Add image\r\n      </button>\r\n      <select\r\n        name=\"filters\"\r\n        id=\"filters\"\r\n        onChange={(e) => {\r\n          setFilter(e.target.value);\r\n        }}\r\n        value={activeFilter}\r\n      >\r\n        <option value=\"\">None</option>\r\n        <option value=\"blur\">Blur</option>\r\n        <option value=\"brighten\">Brighten</option>\r\n        <option value=\"contrast\">Contrast</option>\r\n        <option value=\"enhance\">Enhance</option>\r\n        <option value=\"grayscale\">Grayscale</option>\r\n        <option value=\"noise\">Noise</option>\r\n      </select>\r\n    </ToolsColumn>\r\n  );\r\n};\r\n\r\nTools.propTypes = {\r\n  setBg: func.isRequired,\r\n  addText: func.isRequired,\r\n  addRect: func.isRequired,\r\n  setBgImage: func.isRequired,\r\n  setFilter: func.isRequired,\r\n  addSvg: func.isRequired,\r\n  addImage: func.isRequired,\r\n  changeGradientColorStops: func.isRequired,\r\n  background: object.isRequired,\r\n  activeFilter: string,\r\n};\r\nTools.defaultProps = {\r\n  activeFilter: '',\r\n};\r\n\r\nconst ToolsColumn = styled.div`\r\n  display: flex;\r\n  position: relative;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 10%;\r\n  justify-content: space-around;\r\n`;\r\n\r\nconst StyledSketchPicker = styled(SketchPicker)`\r\n  position: absolute;\r\n  z-index: 2;\r\n  top: 12%;\r\n  left: 90%;\r\n`;\r\n\r\nconst InvisibleInput = styled.input`\r\n  display: none;\r\n`;\r\n\r\nconst GradientWrapper = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst GradientPicker = styled.div`\r\n  position: relative;\r\n  width: 25px;\r\n  height: 25px;\r\n  border: 1px solid black;\r\n  background-color: ${(props) => props.clr};\r\n`;\r\n\r\nexport default Tools;\r\n","import React from 'react';\r\nimport { func, object, number } from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\nconst Controls = ({ deleteElement, activeElement, undo, redo, pastStatesExist, futureStatesExist }) => {\r\n  return (\r\n    <Container>\r\n      <StyledButton disabled={!activeElement} onClick={deleteElement}>\r\n        Remove\r\n      </StyledButton>\r\n      <StyledButton disabled={!pastStatesExist} onClick={() => undo()}>\r\n        Undo\r\n      </StyledButton>\r\n      <StyledButton disabled={!futureStatesExist} onClick={() => redo()}>\r\n        Redo\r\n      </StyledButton>\r\n    </Container>\r\n  );\r\n};\r\n\r\nControls.propTypes = {\r\n  deleteElement: func.isRequired,\r\n  undo: func.isRequired,\r\n  redo: func.isRequired,\r\n  pastStatesExist: number.isRequired,\r\n  futureStatesExist: number.isRequired,\r\n  activeElement: object,\r\n};\r\n\r\nControls.defaultProps = {\r\n  activeElement: null,\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  margin-bottom: 15px;\r\n  justify-content: flex-end;\r\n  width: 100%;\r\n`;\r\n\r\nconst StyledButton = styled.button`\r\n  margin-right: 10px;\r\n`;\r\n\r\nexport default Controls;\r\n","/* eslint-disable import/prefer-default-export */\r\nimport { createSelector } from 'reselect';\r\n\r\nexport const getElements = (state) => state.canvas.present.elements;\r\nexport const getSelectedElementId = (state) => state.editor.activeElementId;\r\n\r\nexport const selectActiveElement = createSelector(\r\n  [getElements, getSelectedElementId],\r\n  (elements, id) => {\r\n    return elements.find((item) => item.id === id);\r\n  }\r\n);\r\n","import React, { useState } from 'react';\r\nimport { func, object, array } from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport { connect } from 'react-redux';\r\nimport { SketchPicker } from 'react-color';\r\n\r\nimport { modifyPathColor } from '../../../store/editor/actions';\r\nimport { modifyElement } from '../../../store/canvas/actions';\r\nimport { selectActiveElement } from '../../../store/editor/selectors';\r\n\r\nconst SVGColorsPicker = ({ pathColors, modifyPathColor, modifyElement, activeElement }) => {\r\n  const [isPickerVisible, setPickerVisibility] = useState(false);\r\n  const [color, setCurrentColor] = useState('#fff');\r\n  const [index, setCurrentIndex] = useState(null);\r\n  const parseSVG = async (index, color) => {\r\n    if (activeElement && activeElement.type === 'svg') {\r\n      const resp = await fetch(activeElement.url);\r\n      const text = await resp.text();\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(text, 'image/svg+xml');\r\n      const paths = doc.querySelectorAll('path');\r\n      paths[index].setAttribute('fill', color);\r\n      const serialized = new XMLSerializer().serializeToString(doc);\r\n      const blob = new Blob([serialized], { type: 'image/svg+xml' });\r\n      const objUrl = URL.createObjectURL(blob);\r\n      modifyElement(activeElement.id, { url: objUrl });\r\n    }\r\n  };\r\n  const onColorPick = (data) => {\r\n    setCurrentColor(data.hex);\r\n    modifyPathColor(index, data.hex);\r\n    parseSVG(index, data.hex);\r\n    setCurrentIndex(null);\r\n    setPickerVisibility(false);\r\n  };\r\n  const onColorClick = (i, color) => {\r\n    setPickerVisibility(false);\r\n    setCurrentIndex(i);\r\n    setCurrentColor(color);\r\n    setPickerVisibility(true);\r\n  };\r\n  return (\r\n    <Container visible={pathColors.length}>\r\n      {isPickerVisible && <StyledSketchPicker color={color} onChangeComplete={onColorPick} />}\r\n      {pathColors.map((col, i) => (\r\n        // eslint-disable-next-line react/no-array-index-key\r\n        <ColoredDiv key={`${col}${i}`} color={col} onClick={() => onColorClick(i, col)} />\r\n      ))}\r\n    </Container>\r\n  );\r\n};\r\n\r\nSVGColorsPicker.propTypes = {\r\n  pathColors: array.isRequired,\r\n  modifyPathColor: func.isRequired,\r\n  modifyElement: func.isRequired,\r\n  activeElement: object,\r\n};\r\nSVGColorsPicker.defaultProps = {\r\n  activeElement: null,\r\n};\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  display: ${(props) => (props.visible ? 'flex' : 'none')};\r\n  justify-content: flex-end;\r\n  width: 100%;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst StyledSketchPicker = styled(SketchPicker)`\r\n  position: absolute;\r\n  z-index: 5;\r\n`;\r\n\r\nconst ColoredDiv = styled.div`\r\n  background-color: ${(props) => props.color};\r\n  width: 25px;\r\n  height: 25px;\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst mapStateToProps = (state) => ({\r\n  pathColors: state.editor.pathColors,\r\n  activeElement: selectActiveElement(state),\r\n});\r\n\r\nconst mapDispatchToProps = { modifyPathColor, modifyElement };\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SVGColorsPicker);\r\n","import React, { useState } from 'react';\r\nimport { func, object } from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport { connect } from 'react-redux';\r\nimport { SketchPicker } from 'react-color';\r\n\r\nimport { modifyElement } from '../../../store/canvas/actions';\r\nimport { selectActiveElement } from '../../../store/editor/selectors';\r\n\r\nconst TextTools = ({ modifyElement, activeElement }) => {\r\n  const [fontSize, setFontSize] = useState(activeElement.fontSize);\r\n  const [isPickerVisible, setPickerVisibility] = useState(false);\r\n  const onFontSizeChange = (e) => {\r\n    setFontSize(e.target.value);\r\n    modifyElement(activeElement.id, { fontSize: Number(e.target.value) });\r\n  };\r\n  const rotateRight = () => {\r\n    const newValue = activeElement.rotation + 45;\r\n    const value = newValue > 360 ? newValue - 360 : newValue;\r\n    modifyElement(activeElement.id, { rotation: value });\r\n  };\r\n  const rotateLeft = () => {\r\n    const newValue = activeElement.rotation - 45;\r\n    const value = newValue < 360 ? newValue + 360 : newValue;\r\n    modifyElement(activeElement.id, { rotation: value });\r\n  };\r\n  const onColorPick = (data) => {\r\n    modifyElement(activeElement.id, { fill: data.hex });\r\n    setPickerVisibility(false);\r\n  };\r\n  const onBoldClick = () => {\r\n    const fontStyle = activeElement.fontStyle === 'normal' ? 'bold' : 'normal';\r\n    modifyElement(activeElement.id, { fontStyle });\r\n  };\r\n  const onItalicClick = () => {\r\n    const fontStyle = activeElement.fontStyle === 'normal' ? 'italic' : 'normal';\r\n    modifyElement(activeElement.id, { fontStyle });\r\n  };\r\n  const onAlignmentChange = (e) => {\r\n    modifyElement(activeElement.id, { align: e.target.value });\r\n  };\r\n  return (\r\n    <Container>\r\n      {isPickerVisible && <StyledSketchPicker color={activeElement.fill} onChangeComplete={onColorPick} />}\r\n      <select name=\"align\" id=\"align\" onChange={onAlignmentChange} value={activeElement.align}>\r\n        <option value=\"left\">Left</option>\r\n        <option value=\"center\">Center</option>\r\n        <option value=\"right\">Right</option>\r\n      </select>\r\n      <button type=\"button\" onClick={onBoldClick}>\r\n        Bold\r\n      </button>\r\n      <button type=\"button\" onClick={onItalicClick}>\r\n        Italic\r\n      </button>\r\n      <button type=\"button\" onClick={rotateLeft}>\r\n        Rotate -45\r\n      </button>\r\n      <button type=\"button\" onClick={rotateRight}>\r\n        Rotate +45\r\n      </button>\r\n      <input type=\"number\" value={fontSize} onChange={onFontSizeChange} max={50} min={1} step={1} />\r\n      <ColorBtn clr={activeElement.fill} onClick={() => setPickerVisibility(true)} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nTextTools.propTypes = {\r\n  modifyElement: func.isRequired,\r\n  activeElement: object.isRequired,\r\n};\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  width: 100%;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst StyledSketchPicker = styled(SketchPicker)`\r\n  position: absolute;\r\n  z-index: 5;\r\n`;\r\n\r\nconst ColorBtn = styled.div`\r\n  width: 20px;\r\n  height: 20px;\r\n  background-color: ${(props) => props.clr};\r\n  margin-left: 15px;\r\n  border: 1px solid #000;\r\n`;\r\n\r\nconst mapStateToProps = (state) => ({\r\n  activeElement: selectActiveElement(state),\r\n});\r\n\r\nconst mapDispatchToProps = { modifyElement };\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TextTools);\r\n","import React from 'react';\r\nimport { func } from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\nconst ImageTools = ({ onCropBtnClick }) => {\r\n  return (\r\n    <Container>\r\n      <button type=\"button\" onClick={onCropBtnClick}>\r\n        Crop\r\n      </button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nImageTools.propTypes = {\r\n  onCropBtnClick: func.isRequired,\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-end;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nexport default ImageTools;\r\n","import React, { useRef, useCallback, useEffect } from 'react';\nimport { func, bool, object, number, string, array } from 'prop-types';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport Canvas from './Canvas';\nimport CropCanvas from './Canvas/CropCanvas';\nimport Tools from './Tools';\nimport Controls from './Controls';\nimport SVGColorsPicker from './SVGColorsPicker';\nimport TextTools from './TextTools';\nimport ImageTools from './ImageTools';\n\nimport { setActiveElementId, setEditingStatus, startCrop } from '../../store/editor/actions';\nimport {\n  setBG,\n  addElement,\n  modifyElement,\n  setBgImage,\n  deleteElement,\n  undo,\n  redo,\n  setFilter,\n  changeGradientColorStops,\n} from '../../store/canvas/actions';\nimport { setPathColors } from '../../store/editor/actions';\n\nimport { selectActiveElement } from '../../store/editor/selectors';\n\nconst Editor = ({\n  setBG,\n  addElement,\n  elements,\n  modifyElement,\n  activeElId,\n  setActiveElementId,\n  setBgImage,\n  deleteElement,\n  activeElement,\n  setEditingStatus,\n  isEditing,\n  undo,\n  redo,\n  pastStatesExist,\n  futureStatesExist,\n  setFilter,\n  activeFilter,\n  setPathColors,\n  pathColors,\n  background,\n  changeGradientColorStops,\n  isCropping,\n  startCrop,\n}) => {\n  useEffect(() => {\n    (async () => {\n      if (activeElement && activeElement.type === 'svg') {\n        const resp = await fetch(activeElement.url);\n        const text = await resp.text();\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(text, 'image/svg+xml');\n        const paths = doc.querySelectorAll('path');\n        const colors = [];\n        for (let i = 0; i < paths.length; i += 1) {\n          colors.push(paths[i].getAttribute('fill'));\n        }\n        setPathColors(colors.filter((item) => Boolean(item)));\n      } else if (pathColors.length && (!activeElement || (activeElement && activeElement.type !== 'svg'))) {\n        setPathColors([]);\n      }\n    })();\n  }, [activeElId]);\n  const onKeyPress = (e) => {\n    if (e.keyCode === 46 && !isEditing && activeElId) {\n      deleteElement(activeElId);\n    }\n  };\n  useEffect(() => {\n    document.addEventListener('keydown', onKeyPress);\n    return () => document.removeEventListener('keydown', onKeyPress);\n  }, [activeElId, isEditing]);\n  const canvasRef = useRef(null);\n  const secondCanvasRef = useRef(null);\n  const createTextEl = useCallback(() => {\n    addElement({\n      id: String(Math.random()),\n      type: 'text',\n      text: `Numba # ${Math.floor(Math.random() * 100)}`,\n      x: process.env.REACT_APP_CANVAS_HEIGHT / 2 - 40,\n      y: process.env.REACT_APP_CANVAS_HEIGHT / 2 - 10,\n      rotation: 0,\n      fill: '#fff',\n      fontSize: 30,\n      fontFamily: 'Arial',\n    });\n  });\n  const createRectangle = useCallback(() => {\n    addElement({\n      id: String(Math.random()),\n      type: 'rect',\n      width: 100,\n      height: 100,\n      x: process.env.REACT_APP_CANVAS_WIDTH / 2 - 50,\n      y: process.env.REACT_APP_CANVAS_HEIGHT / 2 - 50,\n      rotation: 0,\n      stroke: '#000',\n      strokeWidth: 2,\n      fill: 'blue',\n    });\n  });\n  const createSvg = useCallback(async () => {\n    addElement({\n      id: String(Math.random()),\n      type: 'svg',\n      url: 'https://image.flaticon.com/icons/svg/1279/1279553.svg',\n      x: process.env.REACT_APP_CANVAS_WIDTH / 2 - 100,\n      y: process.env.REACT_APP_CANVAS_HEIGHT / 2 - 100,\n      width: 200,\n      height: 200,\n    });\n  });\n  const createImage = useCallback(() => {\n    addElement({\n      id: String(Math.random()),\n      type: 'image',\n      url: 'https://images.pexels.com/photos/326055/pexels-photo-326055.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',\n      originalWidth: 500,\n      originalHeight: 281,\n      x: 0,\n      y: 0,\n      width: process.env.REACT_APP_CANVAS_WIDTH,\n      height: process.env.REACT_APP_CANVAS_HEIGHT / 2,\n    });\n  });\n  const deleteEl = useCallback(() => {\n    if (activeElId && !isEditing) deleteElement(activeElId);\n  });\n  const exportImg = () => {\n    const anchor = document.createElement('a');\n    const src = canvasRef.current.getStage().toDataURL();\n    anchor.setAttribute('href', src);\n    anchor.setAttribute('download', 'imaaage.png');\n    anchor.setAttribute('crossOrigin', 'anonymous');\n    anchor.click();\n  };\n  return (\n    <Container>\n      <EditorBox>\n        {activeElement && activeElement.type === 'svg' && <SVGColorsPicker />}\n        {activeElement && activeElement.type === 'text' && <TextTools />}\n        {activeElement && activeElement.type === 'image' && !isCropping && <ImageTools onCropBtnClick={startCrop} />}\n        <Controls\n          deleteElement={deleteEl}\n          activeElement={activeElement}\n          undo={undo}\n          redo={redo}\n          pastStatesExist={pastStatesExist}\n          futureStatesExist={futureStatesExist}\n        />\n        <Tools\n          background={background}\n          setBg={setBG}\n          addText={createTextEl}\n          addRect={createRectangle}\n          setBgImage={setBgImage}\n          setFilter={setFilter}\n          activeFilter={activeFilter}\n          addSvg={createSvg}\n          addImage={createImage}\n          changeGradientColorStops={changeGradientColorStops}\n        />\n        {!isCropping ? (\n          <Canvas\n            background={background}\n            canvasRef={canvasRef}\n            elements={elements}\n            selectShape={setActiveElementId}\n            selectedId={activeElId}\n            modifyElement={modifyElement}\n            activeElement={activeElement}\n            setEditingStatus={setEditingStatus}\n            isEditing={isEditing}\n            activeFilter={activeFilter}\n          />\n        ) : (\n          <CropCanvas secondCanvasRef={secondCanvasRef} activeElement={activeElement} />\n        )}\n      </EditorBox>\n      <button type=\"button\" style={{ marginBottom: '100px', zIndex: 111 }} onClick={exportImg}>\n        Generate png\n      </button>\n    </Container>\n  );\n};\n\nEditor.propTypes = {\n  setBG: func.isRequired,\n  addElement: func.isRequired,\n  modifyElement: func.isRequired,\n  setBgImage: func.isRequired,\n  deleteElement: func.isRequired,\n  setEditingStatus: func.isRequired,\n  setActiveElementId: func.isRequired,\n  setPathColors: func.isRequired,\n  changeGradientColorStops: func.isRequired,\n  setFilter: func.isRequired,\n  startCrop: func.isRequired,\n  undo: func.isRequired,\n  redo: func.isRequired,\n  activeElId: string,\n  elements: array.isRequired,\n  background: object.isRequired,\n  activeElement: object,\n  isEditing: bool.isRequired,\n  pastStatesExist: number.isRequired,\n  futureStatesExist: number.isRequired,\n  activeFilter: string,\n  pathColors: array.isRequired,\n  isCropping: bool.isRequired,\n};\nEditor.defaultProps = {\n  activeElId: null,\n  activeElement: null,\n  activeFilter: '',\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n`;\n\nconst EditorBox = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  width: 55%;\n  justify-content: space-between;\n`;\n\nconst mapStateToProps = (state) => ({\n  background: state.canvas.present.background,\n  elements: state.canvas.present.elements,\n  activeElId: state.editor.activeElementId,\n  activeElement: selectActiveElement(state),\n  isEditing: state.editor.isEditing,\n  pastStatesExist: state.canvas.past.length,\n  futureStatesExist: state.canvas.future.length,\n  activeFilter: state.canvas.present.filter,\n  pathColors: state.editor.pathColors,\n  isCropping: state.editor.isCropping,\n});\n\nconst mapDispatchToProps = {\n  setBG,\n  addElement,\n  modifyElement,\n  setActiveElementId,\n  setBgImage,\n  deleteElement,\n  setEditingStatus,\n  undo,\n  redo,\n  setFilter,\n  setPathColors,\n  changeGradientColorStops,\n  startCrop,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Editor);\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router';\r\n\r\nimport Login from 'components/Login';\r\nimport SplashScreen from 'components/common/SplashScreen';\r\nimport PrivateRoute from 'components/common/PrivateRoute';\r\nimport Editor from 'components/Editor';\r\n\r\nconst Main = () => {\r\n  return (\r\n    <div>\r\n      <Switch>\r\n        <Route path=\"/editor\" component={Editor} />\r\n        <Route path=\"/about\" component={() => <div>about</div>} />\r\n        <Route path=\"/details\" component={() => <div>details</div>} />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/\" component={SplashScreen} />\r\n      <Route path=\"/login\" component={Login} />\r\n      <PrivateRoute path=\"/\" component={Main} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","/* eslint-disable import/prefer-default-export */\r\nimport { createSelector } from 'reselect';\r\n\r\nexport const getApp = (state) => state.app;\r\n\r\nexport const getLocale = createSelector(\r\n  [getApp],\r\n  (app) => app.locale\r\n);\r\n","import React from 'react';\r\nimport i18next from 'i18next';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { I18nextProvider } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport propTypes from 'prop-types';\r\nimport { getLocale } from '../store/app/selectors';\r\n\r\n/* eslint-disable camelcase */\r\nimport de_DE from './locales/de_DE.json';\r\nimport en_US from './locales/en_US.json';\r\n/* eslint-enable camelcase */\r\n\r\ni18next.init({\r\n  fallbackLng: 'en_US',\r\n  fallbackNS: ['translation'],\r\n  resources: {\r\n    de_DE,\r\n    en_US,\r\n  },\r\n  parseMissingKeyHandler: (missing) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn('MISSING TRANSLATION:', missing);\r\n    }\r\n    return missing;\r\n  },\r\n});\r\n\r\ni18next.languages = ['de_DE', 'en_US'];\r\n\r\nclass I18N extends React.PureComponent {\r\n  componentDidMount() {\r\n    const { locale } = this.props;\r\n    i18next.changeLanguage(locale);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { locale: newLocale } = this.props;\r\n    const { locale: oldLocale } = prevProps;\r\n\r\n    if (oldLocale !== newLocale) {\r\n      i18next.changeLanguage(newLocale);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    return <I18nextProvider i18n={i18next}>{children}</I18nextProvider>;\r\n  }\r\n}\r\n\r\nI18N.propTypes = {\r\n  children: propTypes.any,\r\n  locale: propTypes.oneOf(['en_US', 'de_DE']),\r\n};\r\n\r\nI18N.defaultProps = {\r\n  children: null,\r\n  locale: 'en_US',\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  locale: getLocale(state),\r\n});\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    null,\r\n    null,\r\n    { pure: false }\r\n  )(I18N)\r\n);\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { ConnectedRouter as Router, routerMiddleware } from 'connected-react-router';\r\nimport ErrorBoundary from 'components/common/ErrorBoundary';\r\nimport { configureStore } from 'store';\r\nimport App from 'App';\r\nimport IntlProvider from 'i18n/IntlProvider';\r\n\r\nimport createHistory from 'store/history';\r\n\r\nconst browserHistory = createHistory();\r\n\r\nconst { store, persistor } = configureStore({\r\n  initialState: window.__PRELOADED_STATE__,\r\n  middleware: [routerMiddleware(browserHistory)],\r\n});\r\nrender(\r\n  <Provider store={store}>\r\n    <PersistGate loading={null} persistor={persistor}>\r\n      <Router history={browserHistory}>\r\n        <IntlProvider>\r\n          <ErrorBoundary>\r\n            <App />\r\n          </ErrorBoundary>\r\n        </IntlProvider>\r\n      </Router>\r\n    </PersistGate>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  if (module.hot) {\r\n    module.hot.accept();\r\n  }\r\n\r\n  if (!window.store) {\r\n    window.store = store;\r\n  }\r\n}\r\n"],"sourceRoot":""}